package com.sample

import com.sample.App;
global App app;

declare Question
    text : String 
    responses : String[]
end

declare Response
    question : Question 
    response : String 
end

rule "Init"
when
then
    insert(new Question("Wanna play Dungeons & Dragons", new String[]{"Yes!"}));
    app = new App();
    insert(app);
end

rule "Q1"
when
    q : Question()
then
    String[] options = q.getResponses();
    
    String response = app.askQuestion(q.getText(), options); 
    
    Response r = new Response(q, response);
    
    insert(r);
end

rule "Q2"
when
    r : Response(response == "Yes!")
then
    Question q2 = new Question("Yay! Why do you wanna play High Adventure Pop Fantasy?", new String[]{"I wanna go on adventures!", "Can I be someone from Lord of the Rings or something?", "I want to be a special snowflake", "I don't like fantasy I just wanna do this RPG thing"});
    
    String response2 = app.askQuestion(q2.getText(), q2.getResponses());
    
    Response r2 = new Response(q2, response2);
    
    insert(r2);
end

rule "Q3"
when
    r : Response(response == "I wanna go on adventures!")
then
    Question q3 = new Question("Every hero is special. What makes you special?", new String[]{"What's on the inside. And my sword. And my magic.", "Uh, I'm an elf or something?"});
    
    String response3 = app.askQuestion(q3.getText(), q3.getResponses());
    
    Response r3 = new Response(q3, response3);
    
    insert(r3);
end